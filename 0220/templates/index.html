<!DOCTYPE html>
<html>
<head>
    <title>ì„¼ì„œ ëŒ€ì‹œë³´ë“œ</title>
    <meta http-equiv="refresh" content="5">  <!-- 5ì´ˆë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨ -->
    
    <style>
        body  { font-family: sans-serif; margin: 40px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ccc; padding: 8px 12px; text-align: center; }
        th    { background-color: #4472C4; color: white; }
        tr:nth-child(even) { background-color: #f2f2f2; }
    </style>
</head>

<body>

    <h1>ğŸŒ¡ï¸ DHT11 ì„¼ì„œ ëŒ€ì‹œë³´ë“œ</h1>
    <p><a href="/collect">ğŸ“¥ ì§€ê¸ˆ ë°ì´í„° ìˆ˜ì§‘</a></p>

{% if records %}

    <div style="display:flex; gap:40px; margin-bottom:20px;">
        <div>
            <strong>ì´ ì¸¡ì • íšŸìˆ˜</strong><br>
            {{ total_count }} íšŒ
        </div>
        <div>
            <strong>ìµœê·¼ ì˜¨ë„</strong><br>
            {{ records[0].temperature }} Â°C
        </div>
        <div>
            <strong>ìµœê·¼ ìŠµë„</strong><br>
            {{ records[0].humidity }} %
        </div>
    </div>

    <table>
        <tr>
            <th>ID</th>
            <th>ì˜¨ë„ (Â°C)</th>
            <th>ìŠµë„ (%)</th>
            <th>ìƒíƒœ</th>
            <th>ì¸¡ì • ì‹œê°</th>
        </tr>
        
        {% for row in records %}
        <tr>
            <td>{{ row.id }}</td>
            <td>{{ row.temperature }}</td>
            <td>{{ row.humidity }}</td>
            <td>
                {% if row.temperature >= 28 %}
                    ğŸ”´ ë”ì›€
                {% elif row.temperature <= 20 %}
                    ğŸ”µ ì¶”ì›€
                {% else %}
                    ğŸŸ¢ ì¾Œì 
                {% endif %}
            </td>
            <td>{{ row.recorded_at }}</td>
        </tr>
        {% endfor %}
    </table>

{% else %}
    <p>ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ìœ„ ë§í¬ë¥¼ ëˆŒëŸ¬ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì„¸ìš”.</p>
{% endif %}

</body>

</html>
